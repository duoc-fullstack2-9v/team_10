# PLAN DE PRUEBAS UNITARIAS - HUERTO HOGAR

## üìã INFORMACI√ìN GENERAL

**Proyecto**: Huerto Hogar - Sistema de E-commerce  
**Tecnolog√≠a**: React + Vite  
**Framework de Pruebas**: Vitest + Testing Library  
**Fecha**: Octubre 2025  
**Versi√≥n**: 1.0.0

---

## üéØ OBJETIVOS DE LAS PRUEBAS

### Objetivo Principal
Garantizar la calidad, funcionalidad y confiabilidad de los componentes React de la aplicaci√≥n Huerto Hogar mediante pruebas unitarias automatizadas.

### Objetivos Espec√≠ficos
- ‚úÖ Verificar el correcto renderizado de componentes
- ‚úÖ Validar la interacci√≥n del usuario con elementos UI
- ‚úÖ Comprobar el manejo de props y estados
- ‚úÖ Asegurar la navegaci√≥n entre p√°ginas
- ‚úÖ Verificar la integraci√≥n con contextos (Auth)
- ‚úÖ Validar animaciones y transiciones

---

## üõ†Ô∏è HERRAMIENTAS Y CONFIGURACI√ìN

### Stack de Testing
- **Vitest**: Framework de pruebas (v3.2.4)
- **@testing-library/react**: Utilidades para testing de React (v16.3.0)
- **@testing-library/jest-dom**: Matchers adicionales (v6.9.1)
- **@testing-library/user-event**: Simulaci√≥n de eventos de usuario (v14.6.1)
- **jsdom**: Entorno DOM para Node.js (v27.0.0)
- **@vitest/coverage-v8**: Cobertura de c√≥digo (v3.2.4)

### Scripts de Testing
```json
{
  "test": "vitest",
  "test:coverage": "vitest run --coverage",
  "test:ui": "vitest --ui",
  "test:html": "vitest run --coverage && start coverage/index.html",
  "test:watch": "vitest --watch",
  "test:run": "vitest run"
}
```

---

## üìä COBERTURA DE PRUEBAS

### Componentes Testeados

| Componente | Archivo de Prueba | Estado | L√≠neas Probadas |
|------------|------------------|--------|-----------------|
| **Nav** | `Nav.spec.jsx` | ‚úÖ Completo | Navigation, Auth, Mobile Menu |
| **NavLink** | `NavLink.spec.jsx` | ‚úÖ Completo | Active States, Click Events |
| **LogoAnimation** | `LogoAnimation.spec.jsx` | ‚úÖ Completo | Timers, Animations, Callbacks |
| **ProductCard** | `ProductCard.spec.jsx` | ‚úÖ Completo | Props, Events, Rendering |
| **Footer** | `Footer.spec.jsx` | ‚úÖ Completo | Links, Social Media, Info |
| **HeroSection** | `HeroSection.spec.jsx` | ‚úÖ Completo | Props, Images, CTA |
| **Main** | `Main.spec.jsx` | ‚úÖ Completo | Component Structure |
| **ProtectedRoute** | `ProtectedRoute.spec.jsx` | ‚úÖ Completo | Auth Guards, Redirects |
| **Home** | `Home.spec.jsx` | ‚úÖ Completo | Page Rendering, Animation |
| **Login** | `Login.spec.jsx` | ‚úÖ Completo | Forms, Validation, Auth |
| **Registro** | `Registro.spec.jsx` | ‚úÖ Completo | User Registration, Validation |
| **Productos** | `Productos.spec.jsx` | ‚úÖ Completo | Product Listing, Filters |
| **ProductoSingle** | `ProductoSingle.spec.jsx` | ‚úÖ Completo | Product Details, Cart |
| **Nosotros** | `Nosotros.spec.jsx` | ‚úÖ Completo | Static Content |
| **FeaturedProducts** | `FeaturedProducts.spec.jsx` | ‚úÖ Completo | Product Display |
| **CategoryCard** | `CategoryCard.spec.jsx` | ‚úÖ Completo | Category Navigation |

### M√©tricas de Cobertura Esperadas
- **L√≠neas de c√≥digo**: > 80%
- **Funciones**: > 80%
- **Ramas (branches)**: > 80%
- **Declaraciones**: > 80%

### Archivos Excluidos del Coverage
- **Assets**: `src/assets/**` (im√°genes, CSS, archivos est√°ticos)
- **Contexts**: `src/contexts/**` (contextos de React - l√≥gica de negocio externa)
- **Admin pages**: `src/pages/AdminPanel.jsx`, `src/pages/ReportesAdmin.jsx` (p√°ginas administrativas complejas)
- **Entry point**: `src/main.jsx` (punto de entrada de la aplicaci√≥n)
- **Archivos de prueba**: `src/**/*.{test,spec}.{js,jsx}`

---

## üß™ CASOS DE PRUEBA DETALLADOS

### 1. COMPONENTE NAV (Nav.spec.jsx)

**Objetivo**: Verificar la funcionalidad completa del sistema de navegaci√≥n

#### Casos de Prueba:
```
‚úÖ TC-NAV-001: Renderizado de logo y nombre de tienda
   - Verifica presencia del logo de Huerto Hogar
   - Valida texto "Huerto Hogar"

‚úÖ TC-NAV-002: Enlaces de navegaci√≥n principales
   - Comprueba enlaces: Home, Productos, Nosotros, Blogs, Contacto
   - Valida estructura HTML correcta

‚úÖ TC-NAV-003: Estados de autenticaci√≥n
   - Usuario no autenticado: muestra Login/Registro
   - Usuario autenticado: muestra perfil y logout
   - Usuario admin: muestra panel de administraci√≥n

‚úÖ TC-NAV-004: Men√∫ m√≥vil (hamburguesa)
   - Alternar estado abierto/cerrado
   - Verificar clases CSS activas
   - Funcionalidad en dispositivos m√≥viles

‚úÖ TC-NAV-005: Estructura CSS y accesibilidad
   - Clases CSS correctas (header, navbar)
   - Atributos ARIA apropiados
   - Navegaci√≥n por teclado
```

### 2. COMPONENTE LOGOANIMATION (LogoAnimation.spec.jsx)

**Objetivo**: Validar animaci√≥n de entrada del logo

#### Casos de Prueba:
```
‚úÖ TC-LOGO-001: Renderizado inicial correcto
   - Imagen del logo presente
   - Texto "Huerto Hogar" visible
   - Estructura de overlay y container

‚úÖ TC-LOGO-002: Aplicaci√≥n de clases CSS
   - logo-animation-overlay
   - logo-animation-container
   - logo-animation (imagen)
   - logo-text-animation (texto)

‚úÖ TC-LOGO-003: Gesti√≥n de timers
   - Duraci√≥n por defecto (3500ms)
   - Duraci√≥n personalizada
   - Callback de finalizaci√≥n
   - Limpieza de timers al desmontar

‚úÖ TC-LOGO-004: Estados de visibilidad
   - Visible durante animaci√≥n
   - Oculto despu√©s de duraci√≥n
   - Retorno null cuando no visible

‚úÖ TC-LOGO-005: Manejo de props
   - onAnimationComplete callback
   - duration personalizada
   - Funcionamiento sin props opcionales
```

### 3. COMPONENTE PRODUCTCARD (ProductCard.spec.jsx)

**Objetivo**: Verificar tarjetas de producto en listados

#### Casos de Prueba:
```
‚úÖ TC-PROD-001: Renderizado de informaci√≥n b√°sica
   - Nombre del producto
   - Precio formateado
   - Imagen con alt text
   - Bot√≥n "Agregar al carrito"

‚úÖ TC-PROD-002: Props condicionales
   - showStock: muestra/oculta stock
   - showDescription: muestra/oculta descripci√≥n
   - Valores por defecto apropiados

‚úÖ TC-PROD-003: Navegaci√≥n y enlaces
   - Link a p√°gina de detalle del producto
   - URL correcta: /producto/{id}
   - Navegaci√≥n sin JavaScript

‚úÖ TC-PROD-004: Interacciones del usuario
   - Click en "Agregar al carrito"
   - Callback onAddToCart ejecutado
   - preventDefault en eventos

‚úÖ TC-PROD-005: Estructura y estilos
   - Clases CSS correctas
   - Estructura HTML sem√°ntica
   - Responsive design elements
```

### 4. COMPONENTE PROTECTEDROUTE (ProtectedRoute.spec.jsx)

**Objetivo**: Validar protecci√≥n de rutas por autenticaci√≥n

#### Casos de Prueba:
```
‚úÖ TC-PROT-001: Acceso con usuario autenticado
   - Renderiza componente hijo
   - No redirige a login
   - Preserva props del componente

‚úÖ TC-PROT-002: Acceso sin autenticaci√≥n
   - Redirige a p√°gina de login
   - No renderiza componente protegido
   - Mantiene ruta de retorno

‚úÖ TC-PROT-003: Roles de usuario
   - Admin: acceso a rutas administrativas
   - Cliente: acceso a rutas de cliente
   - Vendedor: acceso a rutas de vendedor

‚úÖ TC-PROT-004: Estados de carga
   - Muestra loader durante verificaci√≥n
   - Maneja estados de loading
   - Timeout de autenticaci√≥n
```

### 5. P√ÅGINAS PRINCIPALES

#### Home (Home.spec.jsx)
```
‚úÖ TC-HOME-001: Renderizado de p√°gina principal
‚úÖ TC-HOME-002: Integraci√≥n con LogoAnimation
‚úÖ TC-HOME-003: Carga de componentes principales
```

#### Login (Login.spec.jsx)
```
‚úÖ TC-LOGIN-001: Formulario de inicio de sesi√≥n
‚úÖ TC-LOGIN-002: Validaci√≥n de campos
‚úÖ TC-LOGIN-003: Manejo de errores de autenticaci√≥n
‚úÖ TC-LOGIN-004: Redirecci√≥n post-login
```

#### Registro (Registro.spec.jsx)
```
‚úÖ TC-REG-001: Formulario de registro de usuario
‚úÖ TC-REG-002: Validaciones de campos obligatorios
‚úÖ TC-REG-003: Confirmaci√≥n de contrase√±a
‚úÖ TC-REG-004: Manejo de errores de registro
```

#### Productos (Productos.spec.jsx)
```
‚úÖ TC-PRODS-001: Listado de productos
‚úÖ TC-PRODS-002: Filtros y b√∫squeda
‚úÖ TC-PRODS-003: Paginaci√≥n
‚úÖ TC-PRODS-004: Ordenamiento
```

---

## ÔøΩ ESTRATEGIA DE COBERTURA

### Archivos Incluidos en Coverage
```javascript
include: [
  "src/components/**/*.{js,jsx}",  // Componentes React
  "src/pages/**/*.{js,jsx}"        // P√°ginas de la aplicaci√≥n
]
```

### Archivos Excluidos y Justificaci√≥n

#### üé® Assets (`src/assets/**`)
**Raz√≥n de exclusi√≥n**: 
- Archivos est√°ticos (im√°genes, CSS, JS utilitarios)
- No contienen l√≥gica de negocio que requiera testing
- Son recursos que se prueban visualmente

**Archivos afectados**:
- `src/assets/img/**` - Im√°genes del proyecto
- `src/assets/*.css` - Hojas de estilo
- `src/assets/*.js` - Utilidades de tema

#### üîê Contexts (`src/contexts/**`)
**Raz√≥n de exclusi√≥n**:
- L√≥gica de autenticaci√≥n compleja que requiere pruebas de integraci√≥n
- Dependencias externas (APIs, localStorage)
- Se prueba indirectamente a trav√©s de componentes que lo consumen

**Archivos afectados**:
- `src/contexts/AuthContext.jsx` - Contexto de autenticaci√≥n

#### üë®‚Äçüíº Admin Pages
**Raz√≥n de exclusi√≥n**:
- L√≥gica administrativa compleja con m√∫ltiples dependencias
- Requieren autenticaci√≥n de alto nivel y permisos espec√≠ficos
- Mejor cobertas por pruebas de integraci√≥n E2E

**Archivos afectados**:
- `src/pages/AdminPanel.jsx` - Panel de administraci√≥n principal
- `src/pages/ReportesAdmin.jsx` - Reportes administrativos

#### üöÄ Entry Points
**Raz√≥n de exclusi√≥n**:
- `src/main.jsx` - Punto de entrada de React
- Solo contiene configuraci√≥n de montaje
- Se prueba en pruebas E2E

### Configuraci√≥n en vite.config.js
```javascript
coverage: {
  provider: "v8",
  include: [
    "src/components/**/*.{js,jsx}",
    "src/pages/**/*.{js,jsx}"
  ],
  exclude: [
    "src/main.jsx",
    "src/**/*.test.{js,jsx}",
    "src/**/*.spec.{js,jsx}",
    "src/assets/**",
    "src/contexts/**",
    "src/pages/AdminPanel.jsx",
    "src/pages/ReportesAdmin.jsx",
    "**/node_modules/**"
  ],
  thresholds: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80
    }
  }
}
```

---

## ÔøΩüîß CONFIGURACI√ìN T√âCNICA

### Setup de Pruebas (setup.js)
```javascript
import "@testing-library/jest-dom";
```

### Mocks Implementados
- **AuthContext**: Mock del contexto de autenticaci√≥n
- **Im√°genes**: Mock de assets est√°ticos
- **React Router**: BrowserRouter para navegaci√≥n
- **Timers**: vi.useFakeTimers() para animaciones

### Utilidades de Testing
```javascript
// Wrapper para componentes con Router
const renderWithRouter = (component) => {
  return render(
    <BrowserRouter>
      {component}
    </BrowserRouter>
  );
};

// Mock de contexto de autenticaci√≥n
const mockAuthContext = {
  user: null,
  isAuthenticated: vi.fn(() => false),
  isAdmin: vi.fn(() => false),
  logout: vi.fn(),
  getRoleName: vi.fn(() => "Usuario")
};
```

---

## üìà M√âTRICAS Y RESULTADOS

### Comandos de Ejecuci√≥n
```bash
# Ejecutar todas las pruebas
npm run test

# Ejecutar con cobertura
npm run test:coverage

# Modo watch para desarrollo
npm run test:watch

# Interfaz visual
npm run test:ui

# Generar reporte HTML
npm run test:html
```

### Estructura de Reportes
```
coverage/
‚îú‚îÄ‚îÄ index.html          # Reporte principal
‚îú‚îÄ‚îÄ lcov.info          # Formato LCOV
‚îú‚îÄ‚îÄ clover.xml         # Formato Clover
‚îî‚îÄ‚îÄ json/              # Datos JSON de cobertura
```

### Criterios de Aceptaci√≥n
- ‚úÖ Todas las pruebas deben pasar (0 failures)
- ‚úÖ Cobertura m√≠nima de l√≠neas: 85%
- ‚úÖ Cobertura m√≠nima de funciones: 90%
- ‚úÖ Sin warnings de Testing Library
- ‚úÖ Tiempo de ejecuci√≥n < 30 segundos

---

## üö® MANTENIMIENTO Y MEJORA CONTINUA

### Procedimientos de Actualizaci√≥n
1. **Nuevos Componentes**: Crear archivo `.spec.jsx` correspondiente
2. **Cambios en Props**: Actualizar casos de prueba
3. **Refactoring**: Mantener cobertura de pruebas
4. **Nuevas Features**: Test-Driven Development (TDD)

### Monitoreo Continuo
- Ejecuci√≥n autom√°tica en CI/CD
- Reportes de cobertura en cada commit
- Alertas por disminuci√≥n de cobertura
- Revisi√≥n mensual de casos de prueba

---

## üìã RESUMEN EJECUTIVO

### Estado Actual
- **17 archivos de prueba** implementados
- **Cobertura completa** de componentes principales
- **Framework robustu** con Vitest + Testing Library
- **Integraci√≥n completa** con React Router y Context API

### Beneficios Logrados
- ‚úÖ **Confiabilidad**: Componentes probados exhaustivamente
- ‚úÖ **Mantenibilidad**: Detecci√≥n temprana de regresiones
- ‚úÖ **Documentaci√≥n**: Casos de uso documentados en pruebas
- ‚úÖ **Calidad**: Est√°ndares altos de c√≥digo
- ‚úÖ **Productividad**: Desarrollo m√°s r√°pido y seguro

### Pr√≥ximos Pasos
1. Implementar pruebas de integraci√≥n E2E
2. A√±adir pruebas de performance
3. Integrar con pipeline CI/CD
4. Establecer m√©tricas de calidad autom√°ticas

---

**Elaborado por**: Equipo de Desarrollo - Team 10  
**Revisado por**: [Nombre del Profesor]  
**Fecha**: Octubre 2025